<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Colorado School Data Package Expansion Plan • coschooldata</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Colorado School Data Package Expansion Plan"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">coschooldata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/enrollment_hooks.html">10 Insights from Colorado School Enrollment Data</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/almartin82/coschooldata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Colorado School Data Package Expansion Plan</h1>
      <small class="dont-index">Source: <a href="https://github.com/almartin82/coschooldata/blob/main/EXPANSION.md" class="external-link"><code>EXPANSION.md</code></a></small>
    </div>

<div id="colorado-school-data-package-expansion-plan" class="section level1">

<blockquote>
<p>Last researched: 2026-01-03 Package: coschooldata Current status: R-CMD-check FAILING, pkgdown passing, Python tests passing</p>
</blockquote>
<div class="section level2">
<h2 id="current-capabilities">Current Capabilities<a class="anchor" aria-label="anchor" href="#current-capabilities"></a></h2>
<table class="table"><thead><tr class="header"><th>Data Type</th>
<th>Status</th>
<th>Years</th>
<th>Function</th>
</tr></thead><tbody><tr class="odd"><td>Enrollment</td>
<td>implemented (BROKEN)</td>
<td>2018-2024</td>
<td><code><a href="reference/fetch_enr.html">fetch_enr()</a></code></td>
</tr></tbody></table><p><strong>CRITICAL ISSUE</strong>: R-CMD-check is failing because: - Vignette <code>enrollment_hooks.Rmd</code> calls <code>fetch_enr_multi(2019:2024)</code> - Current code uses WRONG URL patterns - CDE completely reorganized their URL structure - file naming is inconsistent across years</p>
</div>
<div class="section level2">
<h2 id="state-doe-data-sources">State DOE Data Sources<a class="anchor" aria-label="anchor" href="#state-doe-data-sources"></a></h2>
<div class="section level3">
<h3 id="data-portal-overview">Data Portal Overview<a class="anchor" aria-label="anchor" href="#data-portal-overview"></a></h3>
<ul><li>
<strong>Main data portal</strong>: <a href="https://ed.cde.state.co.us/cdereval" class="external-link uri">https://ed.cde.state.co.us/cdereval</a>
</li>
<li>
<strong>Current year data</strong>: <a href="https://cde.state.co.us/cdereval/pupilcurrent" class="external-link uri">https://cde.state.co.us/cdereval/pupilcurrent</a>
</li>
<li>
<strong>Previous years archive</strong>: <a href="https://ed.cde.state.co.us/cdereval/pupilmembership-statistics/data-insights-resources-archives" class="external-link uri">https://ed.cde.state.co.us/cdereval/pupilmembership-statistics/data-insights-resources-archives</a>
</li>
<li>
<strong>API availability</strong>: No - Excel downloads only</li>
<li>
<strong>File formats</strong>: Excel (.xlsx)</li>
</ul></div>
<div class="section level3">
<h3 id="url-structure-discovery">URL Structure Discovery<a class="anchor" aria-label="anchor" href="#url-structure-discovery"></a></h3>
<p><strong>CRITICAL FINDING</strong>: CDE uses COMPLETELY DIFFERENT URL patterns for each year. There is NO consistent pattern.</p>
<div class="section level4">
<h4 id="id_2023-24-urls-end_year--2024">2023-24 URLs (end_year = 2024)<a class="anchor" aria-label="anchor" href="#id_2023-24-urls-end_year--2024"></a></h4>
<p>School-level files: - <code>https://www.cde.state.co.us/cdereval/pk-12membershipfrlracegenderbyschoolwithflags</code> (combined with flags - NEW) - <code>https://www.cde.state.co.us/cdereval/2023-24pk-12membershipgradelevelbyschool</code> - <code>https://www.cde.state.co.us/cdereval/2023-24pk-12raceethnicityandgenderbygradeandschool</code> - <code>https://www.cde.state.co.us/cdereval/2023-24pk-12instructionalprogramsbyschool</code> - <code>https://www.cde.state.co.us/cdereval/2023-24k-12frleligibilitybyschool</code> - <code>https://www.cde.state.co.us/cdereval/2023-24pk-12frleligibilitybyschool</code></p>
</div>
<div class="section level4">
<h4 id="id_2022-23-urls-end_year--2023">2022-23 URLs (end_year = 2023)<a class="anchor" aria-label="anchor" href="#id_2022-23-urls-end_year--2023"></a></h4>
<p>School-level files: - <code>https://www.cde.state.co.us/cdereval/2022-2023schoolmembershipgrade</code> - <code>https://www.cde.state.co.us/cdereval/2022-2023schoolmembershipethnicityracegender</code> - <code>https://www.cde.state.co.us/cdereval/2022-2023schoolipst</code> - <code>https://www.cde.state.co.us/cdereval/2022-2023schoolk-12frl</code> - <code>https://www.cde.state.co.us/cdereval/2022-2023schoolpk-12frl</code></p>
</div>
<div class="section level4">
<h4 id="id_2021-22-urls-end_year--2022">2021-22 URLs (end_year = 2022)<a class="anchor" aria-label="anchor" href="#id_2021-22-urls-end_year--2022"></a></h4>
<p>School-level files: - <code>https://www.cde.state.co.us/cdereval/2021-2022schoolmembershipgrade</code> - <code>https://www.cde.state.co.us/cdereval/2021-2022schoolmembershipethnicityracegender</code> - <code>https://www.cde.state.co.us/cdereval/2021-2022schoolipst</code> - <code>https://www.cde.state.co.us/cdereval/2021-2022schoolk-12frl</code> - <code>https://www.cde.state.co.us/cdereval/2021-2022schoolpk-12frl</code></p>
</div>
<div class="section level4">
<h4 id="id_2020-21-urls-end_year--2021">2020-21 URLs (end_year = 2021)<a class="anchor" aria-label="anchor" href="#id_2020-21-urls-end_year--2021"></a></h4>
<p>School-level files: - <code>https://www.cde.state.co.us/cdereval/2020-21membershipgradelevelbyschool</code> - <code>https://www.cde.state.co.us/cdereval/2020-21raceethnicityandgenderbyschool</code> - <code>https://www.cde.state.co.us/cdereval/2020-21instructionalprogrambyschool</code> - <code>https://www.cde.state.co.us/cdereval/2020-21k-12frleligibilitybyschool</code> - <code>https://www.cde.state.co.us/cdereval/2020-21pk-12frleligibilitybyschool</code></p>
</div>
<div class="section level4">
<h4 id="id_2019-20-urls-end_year--2020">2019-20 URLs (end_year = 2020)<a class="anchor" aria-label="anchor" href="#id_2019-20-urls-end_year--2020"></a></h4>
<p>School-level files: - <code>https://www.cde.state.co.us/cdereval/2019-20pk-12membershipgradelevelbyschool</code> - <code>https://www.cde.state.co.us/cdereval/2019-20pk-12race/ethnicityandgenderbygradeandschool</code> - <code>https://www.cde.state.co.us/cdereval/2019-20pk-12instructionalprogramsbyschool</code> - <code>https://www.cde.state.co.us/cdereval/2019-20k-12freeandreducedluncheligibilitybyschool</code> - <code>https://www.cde.state.co.us/cdereval/2019-20pk-12freeandreducedluncheligibilitybyschool</code></p>
</div>
<div class="section level4">
<h4 id="id_2018-19-urls-end_year--2019">2018-19 URLs (end_year = 2019)<a class="anchor" aria-label="anchor" href="#id_2018-19-urls-end_year--2019"></a></h4>
<p>Page URL: <code>https://www.cde.state.co.us/cdereval/2017-2018pupilmembership</code> (note: uses START year in URL!) Known working file URLs (confirmed via search): - <code>https://www.cde.state.co.us/cdereval/2018-19pk-12instructiona-programsbyschool-0</code> (note: typo “instructiona” and “-0” suffix) - <code>https://www.cde.state.co.us/cdereval/2018-19pk-1-freeandreducedluncheligibilitybydistrict</code> (note: “pk-1-” instead of “pk-12-”) - Race/ethnicity and grade level files exist but exact URLs not discovered via search - Files confirmed to exist on page: “2018-19 PK-12 Membership Grade Level by School”, “2018-19 PK-12 Race/Ethnicity and Gender by Grade and School”</p>
</div>
<div class="section level4">
<h4 id="id_2017-18-urls-end_year--2018">2017-18 URLs (end_year = 2018)<a class="anchor" aria-label="anchor" href="#id_2017-18-urls-end_year--2018"></a></h4>
<p>Page URL: <code>http://www.cde.state.co.us/cdereval/2017-18pupilmembership</code> - Files confirmed to exist: “2017-18 PK-12 Race/Ethnicity and Gender by Grade and School”, “2017-18 PK-12 Instructional Programs by School” - Exact download URLs not discovered via search</p>
</div>
<div class="section level4">
<h4 id="id_2016-17-urls-end_year--2017">2016-17 URLs (end_year = 2017)<a class="anchor" aria-label="anchor" href="#id_2016-17-urls-end_year--2017"></a></h4>
<p>Known working URL: - <code>https://www.cde.state.co.us/cdereval/2016-17-pm-school-grade-excel</code> (direct xlsx download)</p>
</div>
</div>
<div class="section level3">
<h3 id="url-pattern-observations">URL Pattern Observations<a class="anchor" aria-label="anchor" href="#url-pattern-observations"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Year format varies</strong>: Sometimes <code>2023-24</code>, sometimes <code>2022-2023</code>, sometimes <code>2020-21</code>
</li>
<li>
<strong>File naming varies</strong>:
<ul><li>2024: <code>pk-12membershipgradelevelbyschool</code>
</li>
<li>2023: <code>schoolmembershipgrade</code>
</li>
<li>2021: <code>membershipgradelevelbyschool</code>
</li>
</ul></li>
<li>
<strong>No <code>.xlsx</code> extension in URLs</strong> - these are page URLs that serve Excel files</li>
<li>
<strong>Special characters</strong>: 2019-20 uses <code>race/ethnicity</code> with a slash in the URL</li>
<li>
<strong>Older years</strong> use completely different page URL patterns</li>
</ol></div>
<div class="section level3">
<h3 id="recommended-fix-strategy">Recommended Fix Strategy<a class="anchor" aria-label="anchor" href="#recommended-fix-strategy"></a></h3>
<p><strong>Option A: Hardcoded URL lookup table (RECOMMENDED)</strong> Create a lookup table with verified URLs for each year. This is the most reliable approach given the inconsistent naming.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_enrollment_urls</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">end_year</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">urls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"2024"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      grade <span class="op">=</span> <span class="st">"https://www.cde.state.co.us/cdereval/2023-24pk-12membershipgradelevelbyschool"</span>,</span>
<span>      race_gender <span class="op">=</span> <span class="st">"https://www.cde.state.co.us/cdereval/2023-24pk-12raceethnicityandgenderbygradeandschool"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="st">"2023"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      grade <span class="op">=</span> <span class="st">"https://www.cde.state.co.us/cdereval/2022-2023schoolmembershipgrade"</span>,</span>
<span>      race_gender <span class="op">=</span> <span class="st">"https://www.cde.state.co.us/cdereval/2022-2023schoolmembershipethnicityracegender"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="co"># ... etc</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">urls</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">end_year</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Option B: Web scraping the archive page</strong> Scrape <code>https://ed.cde.state.co.us/cdereval/pupilmembership-statistics/data-insights-resources-archives</code> to dynamically find current URLs. More robust to future changes but more complex.</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="implementation-queue">Implementation Queue<a class="anchor" aria-label="anchor" href="#implementation-queue"></a></h2>
<div class="section level3">
<h3 id="priority-1-fix-r-cmd-check-enrollment-url-fix">Priority 1: FIX R-CMD-CHECK (Enrollment URL Fix)<a class="anchor" aria-label="anchor" href="#priority-1-fix-r-cmd-check-enrollment-url-fix"></a></h3>
<p><strong>Problem:</strong> Current <code><a href="reference/build_cde_url.html">build_cde_url()</a></code> generates URLs like: - <code>https://www.cde.state.co.us/cdereval/2018-19pk-12membershipfrlethnicitygenderschoolflags.xlsx</code></p>
<p>But actual CDE URLs are like: - <code>https://www.cde.state.co.us/cdereval/2019-20pk-12membershipgradelevelbyschool</code> (no .xlsx) - And patterns vary by year</p>
<p><strong>Requirements:</strong> - [ ] Create lookup table with verified URLs for years 2020-2025 - [ ] Update <code><a href="reference/get_raw_enr.html">get_raw_enr()</a></code> to use lookup table - [ ] Update <code><a href="reference/get_available_years.html">get_available_years()</a></code> to 2020-2025 (drop 2018-2019 until URLs verified) - [ ] Update vignette to use years 2020-2024 - [ ] Add URL availability tests for all years</p>
<p><strong>Implementation Notes:</strong> - Focus on 2020+ first (URLs verified) - 2018-2019 needs manual verification from their archive page - Consider adding fallback URL attempts</p>
<p><strong>Test Requirements:</strong> - [ ] URL availability (HTTP 200) for all claimed years - [ ] File download (size &gt; threshold, correct type) - [ ] File parsing (sheets exist, columns present) - [ ] Year filtering (correct year extracted) - [ ] Aggregation (state = sum of districts) - [ ] Data quality (no Inf/NaN, valid ranges) - [ ] Fidelity (tidy output matches raw values)</p>
<p><strong>Estimated complexity</strong>: Medium</p>
<hr></div>
<div class="section level3">
<h3 id="priority-2-graduation-rates">Priority 2: Graduation Rates<a class="anchor" aria-label="anchor" href="#priority-2-graduation-rates"></a></h3>
<ul><li>URL: <a href="https://www.cde.state.co.us/cdereval/gradratecurrent" class="external-link uri">https://www.cde.state.co.us/cdereval/gradratecurrent</a>
</li>
<li>Status: Available</li>
<li>Includes 4, 5, 6, 7-year rates and dropout rates</li>
</ul></div>
<div class="section level3">
<h3 id="priority-3-assessments-cmas">Priority 3: Assessments (CMAS)<a class="anchor" aria-label="anchor" href="#priority-3-assessments-cmas"></a></h3>
<ul><li>URL: <a href="https://www.cde.state.co.us/assessment/cmas-data-and-results" class="external-link uri">https://www.cde.state.co.us/assessment/cmas-data-and-results</a>
</li>
<li>Status: Available</li>
<li>ELA, Math, Science, Social Studies</li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="research-log">Research Log<a class="anchor" aria-label="anchor" href="#research-log"></a></h2>
<div class="section level3">
<h3 id="id_2026-01-03">2026-01-03<a class="anchor" aria-label="anchor" href="#id_2026-01-03"></a></h3>
<ul><li>Checked R-CMD-check status: FAILING</li>
<li>Failure is in vignette building - <code>fetch_enr_multi(2019:2024)</code> fails on 2019</li>
<li>
<strong>KEY FINDING</strong>: CDE has NO consistent URL pattern across years</li>
<li>URLs vary in:
<ul><li>Year format (2023-24 vs 2022-2023 vs 2020-21)</li>
<li>File type naming (membershipgradelevelbyschool vs schoolmembershipgrade)</li>
<li>Path structure</li>
<li>Special characters (race/ethnicity with slash)</li>
<li>Typos in URLs (e.g., “instructiona” instead of “instructional”)</li>
<li>Suffixes (e.g., “-0” appended to some URLs)</li>
</ul></li>
<li>Verified working URLs for 2020-2024 from archive page</li>
<li>2018-2019: Files confirmed to exist, but exact URLs not fully discoverable via web search</li>
<li>2017-2018: Files confirmed to exist on separate page</li>
<li>2016-2017: Found direct download URL pattern (<code>2016-17-pm-school-grade-excel</code>)</li>
<li>
<strong>RECOMMENDATION</strong>:
<ol style="list-style-type: decimal"><li>Use hardcoded URL lookup table for 2020-2025 (verified)</li>
<li>For 2018-2019: Either scrape the page to get URLs or temporarily exclude until verified</li>
<li>Consider adding web scraping of archive page for dynamic URL discovery</li>
</ol></li>
</ul><p>Sources reviewed: - <a href="https://ed.cde.state.co.us/cdereval" class="external-link uri">https://ed.cde.state.co.us/cdereval</a> (main portal) - <a href="https://ed.cde.state.co.us/cdereval/pupilmembership-statistics/data-insights-resources-archives" class="external-link uri">https://ed.cde.state.co.us/cdereval/pupilmembership-statistics/data-insights-resources-archives</a> (archive with all URLs) - <a href="https://www.cde.state.co.us/cdereval/2023-2024pupilmembership" class="external-link uri">https://www.cde.state.co.us/cdereval/2023-2024pupilmembership</a> (2024 data) - <a href="https://www.cde.state.co.us/cdereval/rvprioryearpmdata" class="external-link uri">https://www.cde.state.co.us/cdereval/rvprioryearpmdata</a> (historical data index) - <a href="https://www.cde.state.co.us/cdereval/2019-2020pupilmembership" class="external-link uri">https://www.cde.state.co.us/cdereval/2019-2020pupilmembership</a> (2020 data) - <a href="https://www.cde.state.co.us/cdereval/2017-2018pupilmembership" class="external-link uri">https://www.cde.state.co.us/cdereval/2017-2018pupilmembership</a> (2019 data - confusing URL) - <a href="http://www.cde.state.co.us/cdereval/2017-18pupilmembership" class="external-link uri">http://www.cde.state.co.us/cdereval/2017-18pupilmembership</a> (2018 data)</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="blocked--not-available">Blocked / Not Available<a class="anchor" aria-label="anchor" href="#blocked--not-available"></a></h2>
<table class="table"><thead><tr class="header"><th>Data Type</th>
<th>Reason</th>
<th>Alternative Source?</th>
</tr></thead><tbody><tr class="odd"><td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr></tbody></table></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Al Martin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

